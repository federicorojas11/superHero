<app-header></app-header>

<section>

  <div class="container">
    <div class="row">

      <form class="col-12 col-md-4 order-1 order-md-2 text-center mt-2">
        <mat-form-field appearance="fill">
          <mat-label>Nombre del heroe...</mat-label>
          <input [formControl]="searchForm" matInput formControlName="name"
            placeholder="Ej. A, B, Z, Ironman, Light...">
          <mat-error>Agregue un nombre</mat-error>
        </mat-form-field>
        <br>
        <button type="submit" class="btn shadow-sm bg-dark mt-3" style="color: #fff;" (click)="search()">Buscar</button>
      </form>

      <div *ngIf="this.getSelectedLength() === 0" class="offset-md-4"></div>

      <div *ngIf="this.getSelectedLength() > 0"
        class="col-12 col-md-4 order-3 order-md-1 d-flex align-items-center justify-content-md-center pl-5 pl-md-0 counter-three characters">
        <p>Heroes: {{this.selectedCharacters.heroes.length}}/3 </p>
      </div>

      <div *ngIf="this.getSelectedLength() > 0"
        class="col-12 col-md-4 order-4 order-md-3 d-flex align-items-center justify-content-md-center pl-5 pl-md-0 counter-three villanos">
        <p>Villanos: {{this.getVillanos().length}}/3</p>
      </div>
    </div>
    <div class="row d-flex flex-column justify-content-center">
      <div *ngIf="characters.length > 0" class="order-2 order-md-4 text-center ">
        <div class="container d-flex characters-container">
          <div *ngFor="let character of characters" class="mx-1 mt-4 mb-2">
            <div class="card-hero card text-center hero-{{character.id}}" (click)="switchHero(this.character.id)">
              <div class="character-alignment"><span>{{getAlignment(character)}}</span></div>

              <img src="{{character.image.url}}" onError="this.src='../../assets/img/unknown-image.webp'"
                class="card-img-top"
                style="border-radius: 50%; padding: 6px; max-height: 200px; box-shadow: 0px 0px 4px 2px rgba(0, 0, 0, 0.349);"
                alt="character">
              <div class="card-body">
                <h4 class="card-title"><strong>{{character.name}}</strong></h4>
              </div>
              <p class="card-ocupation-text">
                {{character.work.occupation}}
              </p>
              <div *ngIf="isSelected(this.character.id)">
                <b class="selected-text">seleccionado</b>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="this.getSelectedLength() === 0 && this.characters.length > 0"
        class="col-12 order-6 mt-3 d-flex justify-content-center">
        <span style="color: #fff; font-weight: 500;">Seleccionar personajes: {{this.getSelectedLength()}}/6</span>
      </div>


      <div *ngIf="this.getSelectedLength() > 0" class="col-12 order-5 d-flex justify-content-center">
        <button class="btn shadow-sm bg-dark mt-3 mx-3" style="color: #fff;" (click)="submitCharacters()">Agregar
          personajes</button>
      </div>

      <div *ngIf="this.getSelectedLength()> 0" class="col-12 order-6 d-flex justify-content-center align-items-center">
        <span style="color: #fff; font-weight: 500;">Personajes seleccionados: {{getSelectedLength()}}/6</span>
      </div>

    </div>
  </div>
</section>
